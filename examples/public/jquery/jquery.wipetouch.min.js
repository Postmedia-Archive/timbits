(function($)
{$.fn.wipetouch=function(settings)
{var config={moveX:40,moveY:40,preventDefault:true,allowDiagonal:false,tapToClick:false,wipeLeft:false,wipeRight:false,wipeUp:false,wipeDown:false,wipeUpLeft:false,wipeDownLeft:false,wipeUpRight:false,wipeDownRight:false,wipeTopLeft:false,wipeBottomLeft:false,wipeTopRight:false,wipeBottomRight:false};if(settings)
{$.extend(config,settings);}
this.each(function()
{var startX;var startY;var startDate=false;var curX;var curY;var isMoving=false;var touchedElement=false;function onTouchStart(e)
{if(!isMoving&&e.touches.length>0)
{if(config.preventDefault)
{e.preventDefault();}
if(config.allowDiagonal)
{if(!config.wipeDownLeft)config.wipeDownLeft=config.wipeBottomLeft;if(!config.wipeDownRight)config.wipeDownRight=config.wipeBottomRight;if(!config.wipeUpLeft)config.wipeUpLeft=config.wipeTopLeft;if(!config.wipeUpRight)config.wipeUpRight=config.wipeTopRight;}
startDate=new Date().getTime();startX=e.touches[0].pageX;startY=e.touches[0].pageY;curX=startX;curY=startY;isMoving=true;touchedElement=$(e.target);this.addEventListener('touchmove',onTouchMove,false);}}
function onTouchEnd(e)
{this.removeEventListener('touchmove',onTouchMove,false);touchCalculate(e);}
function onTouchMove(e)
{if(config.preventDefault)
{e.preventDefault();}
if(isMoving)
{curX=e.touches[0].pageX;curY=e.touches[0].pageY;}}
function touchCalculate(e)
{var endDate=new Date().getTime();var ms=startDate-endDate;var x=curX;var y=curY;var dx=x-startX;var dy=y-startY;var ax=Math.abs(dx);var ay=Math.abs(dy);if(ax<15&&ay<15&&ms<100)
{resetTouch();touchedElement.trigger("click");return;}
var toright=dx>0;var tobottom=dy>0;var s=((ax+ay)*60)/((ms)/6*(ms));if(s<1)s=1;if(s>5)s=5;var result={speed:parseInt(s),x:ax,y:ay};if(ax>=config.moveX)
{if(config.allowDiagonal&&ay>=config.moveY)
{if(toright&&tobottom)
{triggerEvent(config.wipeDownRight,result);}
else if(toright&&!tobottom)
{triggerEvent(config.wipeUpRight,result);}
else if(!toright&&tobottom)
{triggerEvent(config.wipeDownLeft,result);}
else
{triggerEvent(config.wipeUpLeft,result);}}
else if(ax>=ay)
{if(toright)
{triggerEvent(config.wipeRight,result);}
else
{triggerEvent(config.wipeLeft,result);}}}
if(ay>=config.moveY&&ay>ax)
{if(tobottom)
{triggerEvent(config.wipeDown,result);}
else
{triggerEvent(config.wipeUp,result);}}
if(config.preventDefault)
{e.preventDefault();}
resetTouch();}
function resetTouch()
{startX=false;startY=false;startDate=false;isMoving=false;}
function triggerEvent(wipeEvent,result)
{if(wipeEvent)wipeEvent(result);}
if('ontouchstart'in document.documentElement)
{this.addEventListener('touchstart',onTouchStart,false);this.addEventListener('touchend',onTouchEnd,false);}});return this;};})(jQuery);